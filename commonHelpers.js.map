{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const renderGallery = (articleContainer, images) => {\n  const createMarkupPage = images.map(article => {\n    return `\n    <div class=\"photo-card\">\n        <a class =\"thumb\" href=\"${article.largeImageURL}\"><img class=\"img\" src=\"${article.webformatURL}\" alt=\"${article.tags}\" loading=\"lazy\" /> </a> \n      <div class=\"info\">\n        <p class=\"info-item\">\n          <b>Likes</b>\n          ${article.likes}\n        </p>\n        <p class=\"info-item\">\n          <b>Views</b>\n          ${article.views}\n        </p>\n        <p class=\"info-item\">\n          <b>Comments</b>\n          ${article.comments}\n        </p>\n        <p class=\"info-item\">\n          <b>Downloads</b>\n          ${article.downloads}\n        </p>\n      </div>\n    </div>\n  `;\n})\n.join('');\n\n   articleContainer.insertAdjacentHTML('beforeend', createMarkupPage);\n\n}","import axios from 'axios';\n\nconst API_KEY  = '31511712-b53d42f48d96ff6235f6befd4';\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport async function fetchArticles(value, currentPage, perPage = 15) {\n  try {\n    const res = await axios.get(`?key=${API_KEY}&q=${value}&image_type=photo&orientation=horizontal&safesearch=true&page=${currentPage}&per_page=${perPage}`);\n    return res.data;\n  } catch (error) {\n    throw error;\n  }\n}\n\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport { renderGallery } from \"./js/render-functions\"; \nimport { fetchArticles } from \"./js/pixabay-api\";\n\nconst articleContainer = document.querySelector('.gallery');\nconst loaderMarkup = '<div id=\"loader\" class=\"loader\"></div>';\nconst searchForm = document.querySelector('.search-form');\nconst searchInputElement = document.querySelector('input.form-control');\n\nlet photos = [];\nlet currentPage = 1;\nlet totalImages = 0;\nlet maxPageNumber = 0;\nlet form = null;\nconst lightbox = new SimpleLightbox('.gallery a');\nconst searchBtn = document.querySelector('.btn-submit');\nconst loadMoreBtn = document.querySelector('[data-action=\"load-more\"]');\n\nsearchForm.addEventListener('submit', handleFormSubmit);\nsearchInputElement.addEventListener('input', handleSearchInputChange);\nloadMoreBtn.addEventListener('click', handleLoadMoreButtonClick);\n\nasync function handleFormSubmit(e) { \n  e.preventDefault();\n  resetPage();\n  form = e.currentTarget.elements.searchQuery.value.trim();\n  if (!form) {\n    showInfoToast('Please type something in the search input');\n  } else {\n    loadMoreBtn.style.display = 'none';\n    await main(form);\n    searchForm.reset();\n  }\n}\n\nfunction handleSearchInputChange() {\n  searchBtn.disabled = !searchInputElement.value.trim();\n}\n\nasync function main(value) {\n  showLoader();\n  clearArticlesContainer();\n  const images = await fetchArticles(value, currentPage);\n  if (images && images.hits.length > 0) {\n    photos = [...images.hits];\n    totalImages = images.totalHits;\n    maxPageNumber = Math.ceil(totalImages / 15);\n    hideLoader();\n    renderGallery(articleContainer, photos);\n    loadMoreBtn.style.display = 'block';\n    searchBtn.disabled = true;\n  } else {\n    hideLoader();\n    loadMoreBtn.style.display = 'none';\n    showErrorToast('Sorry, there are no images matching your search query');\n    clearArticlesContainer();\n  }\n  lightbox.refresh();\n}\n\nasync function handleLoadMoreButtonClick() {\n  showLoaderAddcard();\n  currentPage++;\n  try {\n    const restPhoto = await fetchArticles(form, currentPage);\n    photos = [...restPhoto.hits];\n    if (currentPage >= maxPageNumber) {\n      loadMoreBtn.style.display = 'none';\n      showInfoToast(\"We're sorry, but you've reached the end of search results.\");\n    }\n    hideLoader();\n    renderGallery(articleContainer, photos);\n    scrollToElementHeight();\n    lightbox.refresh();\n  } catch (error) {\n    console.log(error);\n    hideLoader();\n  }\n}\n\nfunction showLoader() {\n  articleContainer.insertAdjacentHTML(\"beforebegin\", loaderMarkup);\n}\n\nfunction showLoaderAddcard() {\n  loadMoreBtn.insertAdjacentHTML(\"beforebegin\", loaderMarkup);\n}\n\nfunction hideLoader() {\n  const loaderSpinner = document.querySelector('#loader');\n  if (loaderSpinner) loaderSpinner.remove();\n}\n\nfunction clearArticlesContainer() {\n  articleContainer.innerHTML = '';\n}\n\nfunction resetPage() {\n  currentPage = 1;\n}\n\nfunction scrollToElementHeight() {\n  const galleryItemElement = document.querySelector('.photo-card');\n  if (galleryItemElement) {\n    const galleryItemRect = galleryItemElement.getBoundingClientRect();\n    scrollToDistance(galleryItemRect.height);\n  }\n}\n\nfunction scrollToDistance(distance) {\n  const delay = 500;\n  const scrollTimeout = setTimeout(() => {\n    window.scrollBy({\n      top: distance * 1.5,\n      left: 0,\n      behavior: 'smooth',\n    });\n    clearTimeout(scrollTimeout);\n  }, delay);\n}\n\nfunction showInfoToast(message) {\n  iziToast.info({\n    title: message,\n    position: 'topRight',\n  });\n}\n\nfunction showErrorToast(message) {\n  iziToast.error({\n    title: message,\n    position: 'topRight',\n  });\n}"],"names":["renderGallery","articleContainer","images","createMarkupPage","article","API_KEY","axios","fetchArticles","value","currentPage","perPage","error","loaderMarkup","searchForm","searchInputElement","photos","totalImages","maxPageNumber","form","lightbox","SimpleLightbox","searchBtn","loadMoreBtn","handleFormSubmit","handleSearchInputChange","handleLoadMoreButtonClick","resetPage","main","showInfoToast","showLoader","clearArticlesContainer","hideLoader","showErrorToast","showLoaderAddcard","scrollToElementHeight","loaderSpinner","galleryItemElement","galleryItemRect","scrollToDistance","distance","scrollTimeout","message","iziToast"],"mappings":"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"}