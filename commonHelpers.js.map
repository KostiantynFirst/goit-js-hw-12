{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const renderGallery = (articleContainer, images) => {\n  const createMarkupPage = images.map(article => {\n    return `\n    <div class=\"photo-card\">\n        <a class =\"thumb\" href=\"${article.largeImageURL}\"><img class=\"img\" src=\"${article.webformatURL}\" alt=\"${article.tags}\" loading=\"lazy\" /> </a> \n      <div class=\"info\">\n        <p class=\"info-item\">\n          <b>Likes</b>\n          ${article.likes}\n        </p>\n        <p class=\"info-item\">\n          <b>Views</b>\n          ${article.views}\n        </p>\n        <p class=\"info-item\">\n          <b>Comments</b>\n          ${article.comments}\n        </p>\n        <p class=\"info-item\">\n          <b>Downloads</b>\n          ${article.downloads}\n        </p>\n      </div>\n    </div>\n  `;\n})\n.join('');\n\n   articleContainer.insertAdjacentHTML('beforeend', createMarkupPage);\n\n}","import axios from 'axios';\n\nconst API_KEY  = '31511712-b53d42f48d96ff6235f6befd4';\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport async function fetchArticles(value, currentPage) {\n  try {\n    const res = await axios.get(`?key=${API_KEY}&q=${value}&image_type=photo&orientation=horizontal&safesearch=true&page=${currentPage}&per_page=15`);\n    return res.data;\n  } catch (error) {\n    throw error;\n  }\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { renderGallery } from \"./js/render-functions\"; \nimport { fetchArticles } from \"./js/pixabay-api\";\n\nconst articleContainer = document.querySelector('.gallery');\nconst loaderMarkup  = '<div id=\"loader\" class=\"loader\"></div>';\n\nconst searchForm = document.querySelector('.search-form');\n\n\nlet photos = [];\nlet form = null;\nlet currentPage = 1;\nlet totalImages = 0;\n\n\nconst searchBtn = document.querySelector('.btn-submit');\nconst loadMoreBtn = document.querySelector('[data-action=\"load-more\"]');\n\n\nsearchForm.addEventListener('submit', handleFormSubmit);\n  \n  function handleFormSubmit(e) { \n  e.preventDefault();\n\n  form = (e.currentTarget.elements.searchQuery.value).trim();\n   if (form === null || form === '') {\n    iziToast.info({\n    title: 'Please type something in the search input',\n      position: 'topRight',\n    });\n   } else {\n     main(form)\n    //  console.log(form);\n     searchForm.reset();\n     \n  }\n\n}\n\nasync function main(value) {\n \n  try {\n\n    articleContainer.insertAdjacentHTML(\"beforebegin\", loaderMarkup);\n    clearArticlesContainer();\n\n    const images = await fetchArticles(value, currentPage);\n    photos = [...images.hits];\n    totalImages = images.totalHits;\n   \n    const loaderSpinner = document.querySelector('#loader');\n    if (loaderSpinner) {\n      loaderSpinner.remove();\n    }\n    \n    if (photos === 0) {\n        \n      iziToast.error({\n        title: 'Sorry, there are no images matching your search query',\n        position: 'topRight',\n      });\n       clearArticlesContainer();\n          loadMoreBtn.style.display = 'none';\n          return;\n    } else {\n      renderGallery(articleContainer, photos);\n      incrementPage();\n      loadMoreBtn.style.display = 'block';\n      searchBtn.disabled = true;\n      }\n      \n  \n  let lightbox = new SimpleLightbox('.gallery a');\n      lightbox.refresh();\n      \n  } catch (error) {\n    console.log(error)\n  }\n\n}\n\n\nloadMoreBtn.addEventListener('click', () => addCards(form));\n\nasync function addCards(value) {\n\n  try {\n    \n  let maxPageNumber = totalImages / 15;\n  let maxPageNumberRoundUp = Math.ceil(maxPageNumber);\n   \n    const restPhoto = await fetchArticles(value, currentPage);\n    photos = [...restPhoto.hits];\n\n   if (currentPage === maxPageNumberRoundUp) { \n    loadMoreBtn.style.display = 'none';\n     iziToast.info({\n       title: \"We're sorry, but you've reached the end of search results.\",\n       position: 'topRight',\n     });\n    \n  \n   } else {\n     renderGallery(articleContainer, photos);\n     incrementPage();\n  }\n  } catch (error) {\n    console.log(error)\n  }\n\n\n}\n\n\nfunction clearArticlesContainer() {\n  articleContainer.innerHTML = '';\n}\n\n\nfunction resetPage() {\n  currentPage = 1;\n} \n\nfunction incrementPage() {\n  currentPage += 1;\n}\n\n\n\n"],"names":["renderGallery","articleContainer","images","createMarkupPage","article","API_KEY","axios","fetchArticles","value","currentPage","error","loaderMarkup","searchForm","photos","form","totalImages","searchBtn","loadMoreBtn","handleFormSubmit","e","iziToast","main","clearArticlesContainer","loaderSpinner","incrementPage","SimpleLightbox","addCards","maxPageNumber","maxPageNumberRoundUp"],"mappings":"owBAAO,MAAMA,EAAgB,CAACC,EAAkBC,IAAW,CACzD,MAAMC,EAAmBD,EAAO,IAAIE,GAC3B;AAAA;AAAA,kCAEuBA,EAAQ,aAAa,2BAA2BA,EAAQ,YAAY,UAAUA,EAAQ,IAAI;AAAA;AAAA;AAAA;AAAA,YAIhHA,EAAQ,KAAK;AAAA;AAAA;AAAA;AAAA,YAIbA,EAAQ,KAAK;AAAA;AAAA;AAAA;AAAA,YAIbA,EAAQ,QAAQ;AAAA;AAAA;AAAA;AAAA,YAIhBA,EAAQ,SAAS;AAAA;AAAA;AAAA;AAAA,GAK5B,EACA,KAAK,EAAE,EAELH,EAAiB,mBAAmB,YAAaE,CAAgB,CAEpE,EC5BME,EAAW,qCACjBC,EAAM,SAAS,QAAU,2BAElB,eAAeC,EAAcC,EAAOC,EAAa,CACtD,GAAI,CAEF,OADY,MAAMH,EAAM,IAAI,QAAQD,CAAO,MAAMG,CAAK,iEAAiEC,CAAW,cAAc,GACrI,IACZ,OAAQC,EAAO,CACd,MAAMA,CACP,CACH,CCHA,MAAMT,EAAmB,SAAS,cAAc,UAAU,EACpDU,EAAgB,yCAEhBC,EAAa,SAAS,cAAc,cAAc,EAGxD,IAAIC,EAAS,CAAA,EACTC,EAAO,KACPL,EAAc,EACdM,EAAc,EAGlB,MAAMC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAc,SAAS,cAAc,2BAA2B,EAGtEL,EAAW,iBAAiB,SAAUM,CAAgB,EAEpD,SAASA,EAAiBC,EAAG,CAC7BA,EAAE,eAAc,EAEhBL,EAAQK,EAAE,cAAc,SAAS,YAAY,MAAO,OAC/CL,IAAS,MAAQA,IAAS,GAC7BM,EAAS,KAAK,CACd,MAAO,4CACL,SAAU,UAChB,CAAK,GAEAC,EAAKP,CAAI,EAETF,EAAW,MAAK,EAIrB,CAEA,eAAeS,EAAKb,EAAO,CAEzB,GAAI,CAEFP,EAAiB,mBAAmB,cAAeU,CAAY,EAC/DW,IAEA,MAAMpB,EAAS,MAAMK,EAAcC,EAAOC,CAAW,EACrDI,EAAS,CAAC,GAAGX,EAAO,IAAI,EACxBa,EAAcb,EAAO,UAErB,MAAMqB,EAAgB,SAAS,cAAc,SAAS,EAKtD,GAJIA,GACFA,EAAc,OAAM,EAGlBV,IAAW,EAAG,CAEhBO,EAAS,MAAM,CACb,MAAO,wDACP,SAAU,UAClB,CAAO,EACAE,IACGL,EAAY,MAAM,QAAU,OAC5B,MACV,MACMjB,EAAcC,EAAkBY,CAAM,EACtCW,IACAP,EAAY,MAAM,QAAU,QAC5BD,EAAU,SAAW,GAIV,IAAIS,EAAe,YAAY,EACjC,QAAO,CAEnB,OAAQf,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CAEH,CAGAO,EAAY,iBAAiB,QAAS,IAAMS,EAASZ,CAAI,CAAC,EAE1D,eAAeY,EAASlB,EAAO,CAE7B,GAAI,CAEJ,IAAImB,EAAgBZ,EAAc,GAC9Ba,EAAuB,KAAK,KAAKD,CAAa,EAGhDd,EAAS,CAAC,IADQ,MAAMN,EAAcC,EAAOC,CAAW,GACjC,IAAI,EAExBA,IAAgBmB,GACnBX,EAAY,MAAM,QAAU,OAC3BG,EAAS,KAAK,CACZ,MAAO,6DACP,SAAU,UACjB,CAAM,IAIDpB,EAAcC,EAAkBY,CAAM,EACtCW,IAEF,OAAQd,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CAGH,CAGA,SAASY,GAAyB,CAChCrB,EAAiB,UAAY,EAC/B,CAOA,SAASuB,GAAgB,CACvBf,GAAe,CACjB"}